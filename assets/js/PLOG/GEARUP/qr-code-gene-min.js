let qrcodeName,qrcode;const qrcodemodal=new bootstrap.Modal($("#qrcodemodal")[0]),qrcoderesultmodal=new bootstrap.Modal($("#qrcoderesultmodal")[0]);$("#qrcodecreator").on("click",(function(){qrcodemodal.show()})),$("#qrcodeform").on("submit",(function(e){e.preventDefault(),qrcodeName=$("#qrcodeName").val().trim(),qrcodeName?(generateQRCode(qrcodeName),qrcodemodal.hide(),resetForm()):alert("Please provide a valid tracker name and a duration greater than 0.")}));const generateQRCode=e=>{qrcoderesultmodal.show(),$("#qrcodecopy").text(e),qrcodegen(e)},qrcodegen=e=>{$("#qrcoderesult").empty();let o,r=e.replace("'","&#39;").replace("#",""),t=$("#colorDark").val()||"#000000",a=$("#colorLight").val()||"#ffffff";switch(($("#errorCorrection").val()||"H").toUpperCase()){case"L":o=QRCode.CorrectLevel.L;break;case"M":o=QRCode.CorrectLevel.M;break;case"Q":o=QRCode.CorrectLevel.Q;break;case"H":default:o=QRCode.CorrectLevel.H;break}let c=Math.min(Math.floor($("#qrcodecreator").width()),430),d=$("<div>").addClass("p-3");$("#qrcoderesult").append(d);let l={text:r,width:c,height:c,colorDark:t,colorLight:a,correctLevel:o};qrcode=new QRCode(d[0],l)},resetForm=()=>{$("#qrcodemodal").on("hidden.bs.modal",(function(){$(this).find("#qrcodeform")[0].reset()}))};timeButton("#qrcodecreator","QR-CODE Generator","btn btn-danger btn-lg btn-fix-width btn-block"),$("#copyQRCode").on("click",(async()=>{const e=$("#qrcoderesult canvas").get(0);if(e)addLogoToQRCode(e,"https://desaign.app/clients/cli/images/1x/blue.png"),e.toBlob((async e=>{try{await navigator.clipboard.write([new ClipboardItem({"image/png":e})]),alert("QR Code copied to clipboard from Canvas!")}catch(e){alert("Failed to copy QR Code. See console for details.")}}));else{const e=$("#qrcoderesult img").get(0);if(e&&e.src)try{const o=await fetch(e.src),r=await o.blob();await navigator.clipboard.write([new ClipboardItem({"image/png":r})]),alert("QR Code copied to clipboard from Image!")}catch(e){alert("Failed to copy QR Code. See console for details.")}else alert("No QR code found to copy.")}})),$(".btn-close").click((()=>{qrcodemodal.hide(),resetForm(),qrcoderesultmodal.hide()}));