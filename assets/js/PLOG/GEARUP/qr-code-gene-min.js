let qrcodeName,qrcode;const qrcodemodal=new bootstrap.Modal($("#qrcodemodal")[0]),qrcoderesultmodal=new bootstrap.Modal($("#qrcoderesultmodal")[0]);$("#qrcodecreator").on("click",(function(){qrcodemodal.show()})),$("#qrcodeform").on("submit",(function(e){e.preventDefault(),qrcodeName=$("#qrcodeName").val().trim(),qrcodeName?(generateQRCode(qrcodeName),qrcodemodal.hide(),resetForm()):alert("Please provide a valid tracker name and a duration greater than 0.")}));const generateQRCode=e=>{qrcoderesultmodal.show(),$("#qrcodecopy").text(e),qrcodegen(e)},qrcodegen=e=>{$("#qrcoderesult").empty();let o=e.replace("'","&#39;").replace("#",""),r=$("#colorDark").val()||"#000000",t=$("#colorLight").val()||"#ffffff",a=Math.min(Math.floor($("#qrcodecreator").width()),430),d=$("<div>").addClass("p-3");$("#qrcoderesult").append(d),qrcode=new QRCodeStyling({width:a,height:a,data:o,image:"black.png",dotsOptions:{color:r,type:"rounded"},backgroundOptions:{color:t},imageOptions:{crossOrigin:"anonymous",margin:20}})},resetForm=()=>{$("#qrcodemodal").on("hidden.bs.modal",(function(){$(this).find("#qrcodeform")[0].reset()}))};timeButton("#qrcodecreator","QR-CODE Generator","btn btn-danger btn-lg btn-fix-width btn-block"),$("#copyQRCode").on("click",(async()=>{const e=$("#qrcoderesult canvas").get(0);if(e)e.toBlob((async e=>{try{await navigator.clipboard.write([new ClipboardItem({"image/png":e})]),alert("QR Code copied to clipboard from Canvas!")}catch(e){alert("Failed to copy QR Code. See console for details.")}}));else{const e=$("#qrcoderesult img").get(0);if(e&&e.src)try{const o=await fetch(e.src),r=await o.blob();await navigator.clipboard.write([new ClipboardItem({"image/png":r})]),alert("QR Code copied to clipboard from Image!")}catch(e){alert("Failed to copy QR Code. See console for details.")}else alert("No QR code found to copy.")}})),$(".btn-close").click((()=>{qrcodemodal.hide(),resetForm(),qrcoderesultmodal.hide()}));